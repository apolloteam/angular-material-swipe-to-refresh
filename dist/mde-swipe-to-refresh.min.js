/*
 * mde-swipe-to-refresh 0.0.4
 * Swipe to refresh (pull to refresh) for Angular Material
 * https://github.com/alirezamirian/angular-material-swipe-to-refresh
*/

!function(e){"use strict";e.module("mde.swipeToRefresh",[]).constant("mdeSwipeToRefreshConfig",{threshold:80})}(angular),function(e){"use strict";n.$inject=["$q","$timeout","mdeSwipeToRefreshConfig"],e.module("mde.swipeToRefresh").directive("mdeSwipeToRefresh",n);var t={None:"None",Updating:"Updating",Pulling:"Pulling"};function n(n,o,r){return{restrict:"A",require:"?^mdeSwipeToRefreshScrollHost",transclude:!0,scope:{mdeOnRefresh:"&?",mdeOnCancel:"&?",mdeScrollHostSelector:"@?",mdeThreshold:"=?"},templateUrl:"swipe-to-refresh/swipe-to-refresh.html",link:function(i,l,m,a){var c,d;if(l.bind("touchstart",function(e){i.state==t.None&&(d=s(e).touches[0].pageY,l.one("touchend",h),l.bind("touchmove",u),0==c[0].scrollTop&&(i.progress=0,i.movement=0,i.$digest()))}),a)c=a.getElement();else if(i.mdeScrollHostSelector){for(var p=l.parent();p[0]!=document.body;)if((p=p.parent())[0].matches(i.mdeScrollHostSelector)){c=p;break}c=c||p}else c=e.element(document.body);function u(e){if(!(c[0].scrollTop>0)){var n,o,r,l=s(e).touches[0].pageY-d;l>0&&i.state!=t.Pulling&&(d=s(e).touches[0].pageY,l=0,i.state=t.Pulling),l>0?(i.movement=Math.min((n=l,2*(o=i.mdeThreshold)*(r=(n+o)/o,Math.log(r)/Math.LN10))),i.progress=Math.min(i.movement/i.mdeThreshold,1),i.$digest()):i.movement>0&&(i.movement=0,i.progress=0,i.$digest())}}function h(r){l.unbind("touchmove",u),i.$apply(function(){1==i.progress?(i.state=t.Updating,i.movement=i.mdeThreshold,n.when((i.mdeOnRefresh||e.noop)()).finally(function(){i.state=t.None,i.movement=0,i.progress=0})):(i.movement>0&&((i.mdeOnCancel||e.noop)(),i.movement=0,i.progress=0),o(function(){i.state=t.None},100))})}i.mdeThreshold=i.mdeThreshold||r.threshold,i.State=t,i.progress=0,i.state=t.None}};function s(t){return e.isDefined(t.originalEvent)?t.originalEvent:t}}}(angular),function(e){"use strict";e.module("mde.swipeToRefresh").directive("mdeSwipeToRefreshScrollHost",function(){return e.$inject=["$element"],{restrict:"A",controller:e};function e(e){this.getElement=function(){return e}}})}(angular),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),function(e){try{e=angular.module("mde.swipeToRefresh")}catch(t){e=angular.module("mde.swipeToRefresh",[])}e.run(["$templateCache",function(e){e.put("swipe-to-refresh/swipe-to-refresh.html",'<div\n     class="_indicator-wrap" layout="column" layout-align="center center"\n     ng-style="{top: -50 + movement + \'px\'}">\n    <span class="md-whiteframe-2dp _indicator" ng-if="state == State.Pulling">\n        <md-progress-circular\n                md-diameter="20" value="{{progress*80}}"\n                ng-style="{transform: \'rotate(\' + movement*1.8 + \'deg)\', opacity: progress == 1 ? 1 : .4}">\n        </md-progress-circular>\n    </span>\n    \x3c!--\n    We use ng-show because ng-if will destroy md-progress-circular scope and it will no longer spin while it\'s\n    fading out. It event don\'t freezes in it\'s last state.\n    --\x3e\n    <span class="md-whiteframe-2dp _indicator _updating" ng-show="state == State.Updating">\n        <md-progress-circular md-diameter="21" md-mode="indeterminate"></md-progress-circular>\n    </span>\n</div>\n<div ng-transclude></div>\n')}])}();